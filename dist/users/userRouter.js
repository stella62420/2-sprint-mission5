"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const withAsync_1 = require("../lib/withAsync");
const userController_1 = require("../users/userController");
const auth_1 = require("../middleware/auth");
const validation_1 = require("../middleware/validation");
const userStruts_1 = require("./userStruts");
const productsStruct_1 = require("../products/productsStruct");
const articlesStructs_1 = require("../articles/articlesStructs");
const userRouter = (0, express_1.Router)();
userRouter.use(auth_1.authenticateUser);
userRouter.get('/me', (0, withAsync_1.withAsync)(userController_1.getMyInfo));
userRouter.patch('/me', (0, validation_1.validate)('body', userStruts_1.UpdateUserBodyStruct), (0, withAsync_1.withAsync)(userController_1.updateMyInfo));
userRouter.patch('/me/password', (0, validation_1.validate)('body', userStruts_1.ChangePasswordBodyStruct), (0, withAsync_1.withAsync)(userController_1.changeMyPassword));
userRouter.get('/me/products', (0, validation_1.validate)('query', productsStruct_1.GetProductListParamsStruct), (0, withAsync_1.withAsync)(userController_1.getMyProducts));
userRouter.get('/me/liked-products', (0, validation_1.validate)('query', productsStruct_1.GetProductListParamsStruct), (0, withAsync_1.withAsync)(userController_1.getLikedProducts));
userRouter.get('/me/liked-articles', (0, validation_1.validate)('query', articlesStructs_1.GetArticleListParamsStruct), (0, withAsync_1.withAsync)(userController_1.getLikedArticles));
exports.default = userRouter;
